(window.webpackJsonpmern=window.webpackJsonpmern||[]).push([[0],{143:function(e,t,n){},161:function(e,t,n){},162:function(e,t,n){},163:function(e,t,n){},164:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(41),o=n.n(r),l=(n(87),n(48),n(19)),c=n(11),s=n(12),u=n(16),h=n(15),m=n(17),f=n(166),d=n(167),p=(n(93),a.Component,n(78)),g=n.n(p),b=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{style:{position:"absolute",display:"flex",justifyContent:"center",height:"100vh",width:"100vw",top:0,bottom:0,left:0,right:0,backgroundColor:"white"}},i.a.createElement("img",{src:g.a,alt:"loading"}))}}]),t}(a.Component),v=n(81),E=Object(v.a)(),k=n(79),y="mk-dev-apps.auth0.com",O="b3b58TdB2AnC2FDdRvfF7hguJrJ1zb6I",j="http://localhost:3000/callback",S=function(){function e(){Object(c.a)(this,e),this.auth0=new k.a.WebAuth({domain:y,clientID:O,redirectUri:j,audience:"https://".concat(y,"/userinfo"),responseType:"token id_token",scope:"openid profile"}),this.login=this.login.bind(this),this.logout=this.logout.bind(this),this.handleAuthentication=this.handleAuthentication.bind(this),this.isAuthenticated=this.isAuthenticated.bind(this),this.getAccessToken=this.getAccessToken.bind(this),this.getProfile=this.getProfile.bind(this)}return Object(s.a)(e,[{key:"login",value:function(){this.auth0.authorize()}},{key:"handleAuthentication",value:function(){var e=this;this.auth0.parseHash((function(t,n){n&&n.accessToken&&n.idToken?(e.setSession(n),E.replace("/home")):t&&(E.replace("/home"),console.log(t),alert("Error: ".concat(t.error,". Check the console for further details.")))}))}},{key:"setSession",value:function(e){var t=JSON.stringify(1e3*e.expiresIn+(new Date).getTime());localStorage.setItem("access_token",e.accessToken),localStorage.setItem("id_token",e.idToken),localStorage.setItem("expires_at",t),E.replace("/home")}},{key:"getAccessToken",value:function(){var e=localStorage.getItem("access_token");if(!e)throw new Error("No access token found");return e}},{key:"getProfile",value:function(e){var t=this,n=this.getAccessToken();this.auth0.client.userInfo(n,(function(n,a){a&&(t.userProfile=a),e(n,a)}))}},{key:"logout",value:function(){localStorage.removeItem("access_token"),localStorage.removeItem("id_token"),localStorage.removeItem("expires_at"),this.userProfile=null,E.replace("/home")}},{key:"isAuthenticated",value:function(){var e=JSON.parse(localStorage.getItem("expires_at"));return(new Date).getTime()<e}}]),e}(),A=n(80),T=(n(143),function(e){var t=e.children;return i.a.createElement("div",{style:{height:300},className:"jumbotron"},t)}),w=n(25),I=n.n(w),C=function(e){return I.a.get("/api/userdata/"+e)},N=(n(161),function(e){var t=e.size,n=e.children;return i.a.createElement("div",{className:t.split(" ").map((function(e){return"col-"+e})).join(" ")},n)}),P=function(e){var t=e.fluid,n=e.children;return i.a.createElement("div",{className:"container".concat(t?"-fluid":"")},n)},x=function(e){var t=e.fluid,n=e.children;return i.a.createElement("div",{className:"row".concat(t?"-fluid":"")},n)},_=(n(162),new S,function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={profile:{}},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.auth,n=t.userProfile,a=t.getProfile;(0,t.isAuthenticated)()&&(n?this.setState({profile:n}):a((function(t,n){e.setState({profile:n}),console.log("user profile: "+JSON.stringify(e.state.profile,2,null))})))}},{key:"goTo",value:function(e){E.replace("/".concat(e))}},{key:"login",value:function(){this.props.auth.login()}},{key:"logout",value:function(){this.props.auth.logout()}},{key:"render",value:function(){var e=this.props.auth.isAuthenticated,t=this.state.profile;return i.a.createElement(P,{fluid:!0},i.a.createElement(f.a,{fluid:!0},i.a.createElement(x,null,i.a.createElement(N,{size:"md-4"},i.a.createElement(f.a.Header,null,i.a.createElement(f.a.Brand,null,i.a.createElement("a",{href:"#"},"Auth0 - React")),i.a.createElement(d.a,{bsStyle:"primary",className:"btn-margin",onClick:this.goTo.bind(this,"home")},"Home"),e()&&i.a.createElement(d.a,{bsStyle:"primary",className:"btn-margin",onClick:this.goTo.bind(this,"profile")},"Profile"),!e()&&i.a.createElement(d.a,{id:"qsLoginBtn",bsStyle:"primary",className:"btn-margin",onClick:this.login.bind(this)},"Log In"),e()&&i.a.createElement(d.a,{id:"qsLogoutBtn",bsStyle:"primary",className:"btn-margin",onClick:this.logout.bind(this)},"Log Out"))),i.a.createElement(N,{size:"md-8"},e()&&i.a.createElement("h1",null,"Welcome ",t.given_name)))))}}]),t}(a.Component)),J=function(e){function t(e){var n;Object(c.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).loadTestData=function(){C().then((function(e){console.log("test data: "+JSON.stringify(e.data,null,2)),console.log("First name in list: "+e.data[0].name),n.setState({names:e.data,firstName:e.data[0].name}),console.log("names state: "+JSON.stringify(n.state.names,null,2))})).catch((function(e){return console.log(e)}))},n.handleInputChange=function(e){var t=e.target,a=t.name,i=t.value;n.setState(Object(A.a)({},a,i)),n.readUserInput(e)};var a=n.props.auth.isAuthenticated;return n.state={names:[],firstName:"",profile:{},authorized:a()},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.state.authorized){console.log(this.props.auth);var t=this.props.auth,n=t.userProfile,a=t.getProfile;n?this.setState({profile:n}):a((function(t,n){e.setState({profile:n})})),this.loadTestData()}}},{key:"render",value:function(){var e=this.props.auth.isAuthenticated,t=this.state.profile;return i.a.createElement(P,{fluid:!0},i.a.createElement(x,null,i.a.createElement(_,{auth:this.props.auth})),i.a.createElement(x,null,i.a.createElement(T,null,!e()&&i.a.createElement("div",null,i.a.createElement("h1",null,"Hello - Please Log In To Get Started. ")),e()&&i.a.createElement("h1",null,"Hello ",t.given_name,": Time to Get Coding!!"))),!e()&&i.a.createElement(x,null,i.a.createElement(P,null,i.a.createElement("h3",null,"If this the first time opening the app, please create a  new application in Auth0 and make sure that the client id and domain are properly set in the auth0-variables.js file and that the callback URLs are allowed in Auth0"))))}}]),t}(a.Component),D=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement(P,{fluid:!0},i.a.createElement(x,null,i.a.createElement(T,null,i.a.createElement("h1",null,"Test Page!!!"))))}}]),t}(a.Component),z=(n(163),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.setState({profile:{}});var t=this.props.auth,n=t.userProfile,a=t.getProfile;n?this.setState({profile:n}):a((function(t,n){e.setState({profile:n})}))}},{key:"render",value:function(){this.state.profile;return null}}]),t}(a.Component)),L=new S,B=i.a.createElement(l.c,{history:E},i.a.createElement("div",null,i.a.createElement(l.b,{exact:!0,path:"/",render:function(e){return i.a.createElement(J,Object.assign({auth:L},e))}}),i.a.createElement(l.b,{exact:!0,path:"/home",render:function(e){return i.a.createElement(J,Object.assign({auth:L},e))}}),i.a.createElement(l.b,{exact:!0,path:"/test",render:function(e){return i.a.createElement(D,Object.assign({auth:L},e))}}),i.a.createElement(l.b,{exact:!0,path:"/testdata",render:function(e){return i.a.createElement(J,Object.assign({auth:L},e))}}),i.a.createElement(l.b,{exact:!0,path:"/callback",render:function(e){return function(e){var t=e.location;/access_token|id_token|error/.test(t.hash)&&L.handleAuthentication()}(e),i.a.createElement(b,e)}}),i.a.createElement(l.b,{exact:!0,path:"/profile",render:function(e){return L.isAuthenticated()?i.a.createElement(z,Object.assign({auth:L},e)):i.a.createElement(l.a,{to:"/home"})}})));o.a.render(B,document.getElementById("root"))},78:function(e,t,n){e.exports=n.p+"static/media/loading.c5590569.svg"},82:function(e,t,n){e.exports=n(164)},87:function(e,t,n){},93:function(e,t,n){}},[[82,1,2]]]);
//# sourceMappingURL=main.bc796099.chunk.js.map